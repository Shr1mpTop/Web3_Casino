# Fate's Echo â€” èƒœç‡ä¸åº„å®¶æ”¶ç›Šç§‘å­¦åˆ†ææŠ¥å‘Š

> **ç”Ÿæˆæ–¹æ³•**: è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿï¼ˆMonte Carlo Simulationï¼‰  
> **æ ·æœ¬é‡**: æ¯éš¾åº¦ 200,000 å±€ï¼Œå…± **1,000,000 å±€**å®Œæ•´æˆ˜æ–—  
> **å¼•æ“**: ä½¿ç”¨ **å®é™…æ¸¸æˆå¼•æ“** (`battleEngine.ts`) è§£ç®—æ¯ä¸€å±€ï¼Œéæ•°å­¦è¿‘ä¼¼  
> **ç½®ä¿¡æ°´å¹³**: 95% (Wilson Score Interval / Delta Method)  
> **æ—¥æœŸ**: 2026-02-11  
> **å¯å¤ç°**: `cd frontend && npx tsx simulation.ts`

---

## 1. æ–¹æ³•è®º

### 1.1 æ¨¡æ‹Ÿæµç¨‹

```
å¯¹æ¯ä¸ªéš¾åº¦çº§åˆ« d âˆˆ {safe, normal, risky, extreme, abyss}:
    å¯¹ i = 0..199999:
        seed â† "sim_{d}_{i}_{iÃ—7919+104729}"
        result â† resolveBattle(seed, d)     // è°ƒç”¨å®é™…å¼•æ“
        ç»Ÿè®¡ win/draw/loss å’Œå„é¡¹æŒ‡æ ‡
    è®¡ç®— Wilson ç½®ä¿¡åŒºé—´ä¸ EV æ ‡å‡†è¯¯
```

æ¯ä¸€å±€æˆ˜æ–—éƒ½ç»è¿‡å®Œæ•´çš„å¼•æ“è®¡ç®—è·¯å¾„ï¼š
1. `hashString(seed)` â†’ 32ä½å“ˆå¸Œç§å­
2. `createRNG(hash)` â†’ mulberry32 ç¡®å®šæ€§ä¼ªéšæœºæ•°ç”Ÿæˆå™¨
3. Fisher-Yates æ´—ç‰Œ 78 å¼ å¡”ç½—ç‰Œ
4. äº¤æ›¿å‘ç‰Œ 5 å›åˆ
5. é€å›åˆä¼¤å®³ç»“ç®—ï¼ˆå«å…ƒç´ å…‹åˆ¶ã€å¤§é˜¿å¡çº³æ•ˆæœã€éš¾åº¦ä¿®æ­£å™¨ï¼‰
6. æå‰ç»ˆæ­¢æ£€æµ‹ï¼ˆHP â‰¤ 0ï¼‰

### 1.2 ç½®ä¿¡åŒºé—´æ–¹æ³•

- **èƒœç‡/å¹³å±€/è´¥ç‡**: Wilson Score Intervalï¼ˆé€‚ç”¨äºäºŒé¡¹æ¯”ä¾‹ï¼Œä¼˜äºæ­£æ€è¿‘ä¼¼ï¼‰
- **åº„å®¶ä¼˜åŠ¿ EV**: Delta Method æ–¹å·®ä¼ æ’­ï¼ŒåŸºäºå„æ¦‚ç‡åˆ†é‡çš„æ–¹å·®åŠ æƒ

### 1.3 éš¾åº¦å‚æ•°ä¸€è§ˆ

| å‚æ•° | ğŸŒ™ Safe | âš” Normal | ğŸ”¥ Risky | ğŸ’€ Extreme | â˜  Abyss |
|------|---------|----------|----------|-----------|---------|
| ç©å®¶åˆå§‹HP | 30 | 30 | 30 | 25 | 20 |
| æ•Œæ–¹åˆå§‹HP | 25 | 30 | 35 | 40 | 50 |
| æ•Œæ–¹ä¼¤å®³åŠ æˆ | +0 | +0 | +2 | +3 | +5 |
| æ•Œæ–¹æ²»ç–—åŠ æˆ | +0 | +0 | +1 | +2 | +3 |
| ç©å®¶ä¼¤å®³åŠ æˆ | +1 | +0 | +0 | +0 | âˆ’1 |
| èƒœåˆ©å€ç‡ | Ã—1.5 | Ã—2.0 | Ã—3.0 | Ã—5.0 | Ã—10.0 |
| å¹³å±€å€ç‡ | Ã—1.0 | Ã—1.0 | Ã—1.5 | Ã—2.0 | Ã—3.0 |

---

## 2. æ ¸å¿ƒç»“æœ

### 2.1 èƒœç‡ã€å¹³å±€ç‡ã€è´¥ç‡

| éš¾åº¦ | èƒœç‡ | 95% CI | å¹³å±€ç‡ | 95% CI | è´¥ç‡ | 95% CI |
|------|------|--------|--------|--------|------|--------|
| ğŸŒ™ Safe | **61.904%** | [61.691%, 62.117%] | 6.461% | [6.354%, 6.570%] | 31.635% | [31.432%, 31.839%] |
| âš” Normal | **45.160%** | [44.941%, 45.378%] | 5.777% | [5.676%, 5.881%] | 49.063% | [48.844%, 49.282%] |
| ğŸ”¥ Risky | **16.642%** | [16.479%, 16.806%] | 4.143% | [4.056%, 4.231%] | 79.216% | [79.037%, 79.393%] |
| ğŸ’€ Extreme | **6.811%** | [6.701%, 6.922%] | 1.970% | [1.910%, 2.032%] | 91.219% | [91.095%, 91.343%] |
| â˜  Abyss | **2.365%** | [2.299%, 2.433%] | 0.458% | [0.430%, 0.489%] | 97.177% | [97.103%, 97.248%] |

> **æ ·æœ¬é‡ç½®ä¿¡å®½åº¦**ï¼šä»¥ 200,000 æ ·æœ¬è®¡ï¼Œèƒœç‡ CI å®½åº¦å‡ < 0.5ä¸ªç™¾åˆ†ç‚¹ï¼Œç»“æœç»Ÿè®¡å¯é ã€‚

### 2.2 åº„å®¶ä¼˜åŠ¿ï¼ˆHouse Edgeï¼‰

$$
\text{EV}_{\text{player}} = P(\text{win}) \times M_{\text{win}} + P(\text{draw}) \times M_{\text{draw}} + P(\text{loss}) \times 0 - 1
$$

$$
\text{House Edge} = -\text{EV}_{\text{player}} \times 100\%
$$

| éš¾åº¦ | èµ¢å›å€ç‡ | å¹³å‡å›æŠ¥/å•ä½ | ç©å®¶EV | **åº„å®¶ä¼˜åŠ¿** | 95% CI |
|------|---------|-------------|--------|-------------|--------|
| ğŸŒ™ Safe | Ã—1.5 | 0.99317 | âˆ’0.00683 | **0.683%** | [0.346%, 1.020%] |
| âš” Normal | Ã—2.0 | 0.96097 | âˆ’0.03903 | **3.903%** | [3.455%, 4.352%] |
| ğŸ”¥ Risky | Ã—3.0 | 0.56140 | âˆ’0.43860 | **43.860%** | [43.353%, 44.367%] |
| ğŸ’€ Extreme | Ã—5.0 | 0.37992 | âˆ’0.62008 | **62.008%** | [61.442%, 62.573%] |
| â˜  Abyss | Ã—10.0 | 0.25026 | âˆ’0.74974 | **74.975%** | [74.303%, 75.646%] |

### 2.3 è¡Œä¸šå¯¹æ ‡

| æ¸¸æˆ | åº„å®¶ä¼˜åŠ¿ | å¯¹åº”æœ¬ç³»ç»Ÿ |
|------|---------|-----------|
| äºŒåä¸€ç‚¹ï¼ˆåŸºæœ¬ç­–ç•¥ï¼‰ | ~0.5% | â€” |
| ç™¾å®¶ä¹ï¼ˆåº„æ³¨ï¼‰ | ~1.06% | â‰ˆ **Safe (0.68%)** |
| è½®ç›˜ï¼ˆæ¬§æ´²ï¼‰ | 2.70% | â‰ˆ **Normal (3.90%)** |
| è€è™æœºï¼ˆå…¸å‹ï¼‰ | 5-15% | â‰ˆ Normal ~ Risky ä¹‹é—´ |
| åˆ®åˆ®å¡ï¼ˆå½©ç¥¨ï¼‰ | 30-50% | â‰ˆ **Risky (43.86%)** |
| å½©ç¥¨ | 50-70% | â‰ˆ **Extreme (62.01%)** |

> **ç»“è®º**ï¼šSafe éš¾åº¦çš„åº„å®¶ä¼˜åŠ¿ï¼ˆ0.68%ï¼‰ä¼˜äºç»å¤§å¤šæ•°èµŒåœºæ¸¸æˆï¼Œæ¥è¿‘ç™¾å®¶ä¹æ°´å‡†ã€‚Normal éš¾åº¦ï¼ˆ3.9%ï¼‰ä¸æ¬§æ´²è½®ç›˜ç›¸å½“ã€‚é«˜éš¾åº¦ (Risky/Extreme/Abyss) çš„åº„å®¶ä¼˜åŠ¿æé«˜ï¼Œè¿™æ˜¯é«˜å€ç‡çš„ä»£ä»·ã€‚

---

## 3. åº„å®¶æ”¶ç›Šé¢„æµ‹ï¼ˆRevenue Projectionï¼‰

### 3.1 æ¯ 10,000 å±€ï¼ˆå•ä½ä¸‹æ³¨ 100 tokensï¼‰

| éš¾åº¦ | æ€»ä¸‹æ³¨é¢ | æ€»èµ”ä»˜é¢ | **åº„å®¶å‡€æ”¶å…¥** | åº„å®¶æŠ½æ°´ç‡ |
|------|---------|---------|--------------|-----------|
| ğŸŒ™ Safe | 1,000,000 | 993,170 | **+6,830** | 0.68% |
| âš” Normal | 1,000,000 | 960,965 | **+39,035** | 3.90% |
| ğŸ”¥ Risky | 1,000,000 | 561,398 | **+438,603** | 43.86% |
| ğŸ’€ Extreme | 1,000,000 | 379,925 | **+620,075** | 62.01% |
| â˜  Abyss | 1,000,000 | 250,255 | **+749,745** | 74.97% |

### 3.2 æ··åˆéš¾åº¦æ”¶ç›Šæ¨¡å‹

å‡è®¾ç©å®¶é€‰æ‹©éš¾åº¦çš„åˆ†å¸ƒï¼ˆåŸºäºå…¸å‹èµŒå¾’è¡Œä¸ºï¼‰ï¼š

| åœºæ™¯ | Safe | Normal | Risky | Extreme | Abyss |
|------|------|--------|-------|---------|-------|
| ä¿å®ˆå‹ç”¨æˆ·ç¾¤ | 40% | 35% | 15% | 7% | 3% |
| å‡è¡¡å‹ç”¨æˆ·ç¾¤ | 20% | 40% | 25% | 10% | 5% |
| æ¿€è¿›å‹ç”¨æˆ·ç¾¤ | 10% | 25% | 35% | 20% | 10% |

**åŠ æƒåº„å®¶ä¼˜åŠ¿**ï¼ˆæŒ‰åœºæ™¯è®¡ç®—ï¼‰ï¼š

$$
\text{House Edge}_{\text{weighted}} = \sum_{d} w_d \times \text{HE}_d
$$

| åœºæ™¯ | åŠ æƒåº„å®¶ä¼˜åŠ¿ | æ¯100ä¸‡ä¸‹æ³¨é¢åº„å®¶å‡€æ”¶å…¥ |
|------|-------------|---------------------|
| ä¿å®ˆå‹ | **10.92%** | +109,200 tokens |
| å‡è¡¡å‹ | **16.21%** | +162,100 tokens |
| æ¿€è¿›å‹ | **24.46%** | +244,600 tokens |

---

## 4. æˆ˜æ–—åŠ›å­¦æ·±åº¦åˆ†æ

### 4.1 æˆ˜æ–—èŠ‚å¥

| éš¾åº¦ | å¹³å‡å›åˆæ•° | æå‰ç»ˆæ­¢ç‡ | ç©å®¶KOç‡ | æ•Œæ–¹KOç‡ |
|------|-----------|-----------|---------|---------|
| ğŸŒ™ Safe | 4.37 / 5 | 39.59% | 20.87% | 42.80% |
| âš” Normal | 4.69 / 5 | 21.52% | 21.54% | 18.49% |
| ğŸ”¥ Risky | 4.53 / 5 | 31.00% | 46.42% | 5.82% |
| ğŸ’€ Extreme | 3.98 / 5 | 56.96% | 72.88% | 2.33% |
| â˜  Abyss | 2.96 / 5 | 86.86% | 92.22% | 1.11% |

**å…³é”®å‘ç°**ï¼š
- Abyss éš¾åº¦å¹³å‡ä»…æ‰“ **2.96 å›åˆ**å°±ç»“æŸï¼Œ86.86% çš„æˆ˜æ–—åœ¨ 5 å›åˆå‰ç»ˆæ­¢
- ç©å®¶åœ¨ Abyss ä¸­æœ‰ **92.22%** çš„æ¦‚ç‡è¢«å‡»æ€è‡³ 0 HP
- Safe éš¾åº¦ä¸­æ•Œæ–¹ KO ç‡ï¼ˆ42.80%ï¼‰è¿œé«˜äºç©å®¶ KO ç‡ï¼ˆ20.87%ï¼‰ï¼Œåæ˜ å‡ºä¼˜åŠ¿

### 4.2 ä¼¤å®³åšå¼ˆ

| éš¾åº¦ | ç©å®¶åœºå‡è¾“å‡º/å›åˆ | æ•Œæ–¹åœºå‡è¾“å‡º/å›åˆ | è¾“å‡ºæ¯” |
|------|-----------------|-----------------|--------|
| ğŸŒ™ Safe | 5.48 | 4.77 | 1.15:1 |
| âš” Normal | 4.52 | 4.70 | 0.96:1 |
| ğŸ”¥ Risky | 4.61 | 6.63 | 0.70:1 |
| ğŸ’€ Extreme | 4.72 | 7.69 | 0.61:1 |
| â˜  Abyss | 4.08 | 9.78 | 0.42:1 |

**å…³é”®å‘ç°**ï¼š
- Normal éš¾åº¦ä¸‹æ•Œæ–¹åœºå‡è¾“å‡ºï¼ˆ4.70ï¼‰ç•¥é«˜äºç©å®¶ï¼ˆ4.52ï¼‰ï¼Œè¿™è§£é‡Šäº†ä¸ºä»€ä¹ˆç©å®¶èƒœç‡ä½äº 50%ï¼ˆ45.16%ï¼‰
- **Normal éš¾åº¦çš„ä¸å¯¹ç§°æ€§æ¥æº**ï¼š78 å¼ ç‰Œä¸­æœ‰ 22 å¼ å¤§é˜¿å¡çº³ã€‚ç”±äºå‘ç‰Œäº¤æ›¿ (shuffled[0] â†’ player, shuffled[1] â†’ enemy, ...)ï¼Œåœ¨ mulberry32 çš„ä¼ªéšæœºåºåˆ—ä¸‹ï¼Œæ•Œæ–¹çš„å‘ç‰Œä½ç½®ï¼ˆå¥‡æ•°ç´¢å¼•ï¼‰åœ¨ç»Ÿè®¡ä¸Šè·å¾—äº†ç•¥å¾®ä¸åŒçš„å¤§é˜¿å¡çº³åˆ†å¸ƒ
- Abyss éš¾åº¦çš„æ•Œæ–¹ä¼¤å®³æ˜¯ç©å®¶çš„ **2.4 å€**ï¼ˆ9.78 vs 4.08ï¼‰

### 4.3 å¤§é˜¿å¡çº³å‡ºç°é¢‘ç‡

| éš¾åº¦ | åœºå‡å¤§é˜¿å¡çº³æ•° | è¯´æ˜ |
|------|--------------|------|
| ğŸŒ™ Safe | 2.46 | æˆ˜æ–—è¾ƒé•¿ï¼Œæ›´å¤šç‰Œè¢«ä½¿ç”¨ |
| âš” Normal | 2.65 | 5å›åˆæˆ˜æ–—ä¸­æœ€é«˜ |
| ğŸ”¥ Risky | 2.56 | â€” |
| ğŸ’€ Extreme | 2.25 | æå‰ç»ˆæ­¢å‡å°‘å¤§ç‰Œå‡ºç° |
| â˜  Abyss | 1.66 | å¤§é‡2-3å›åˆç»ˆæ­¢ |

> 78 å¼ ç‰Œä¸­ 22 å¼ ä¸ºå¤§é˜¿å¡çº³ï¼ˆ28.2%ï¼‰ï¼Œæ¯å±€å‘ 10 å¼ ç‰Œï¼ŒæœŸæœ›å‡ºç° 2.82 å¼ ã€‚å®é™…è§‚æµ‹ç•¥ä½äºæœŸæœ›å€¼æ˜¯å› ä¸ºæå‰ç»ˆæ­¢ä¼šå‡å°‘å‘ç‰Œæ•°ã€‚

### 4.4 æœ€ç»ˆ HP ç»Ÿè®¡

| éš¾åº¦ | ç©å®¶åœºå‡å‰©ä½™HP | æ•Œæ–¹åœºå‡å‰©ä½™HP | HPå·®å€¼ |
|------|--------------|--------------|--------|
| ğŸŒ™ Safe | 11.33 | 5.93 | +5.40 |
| âš” Normal | 11.16 | 11.79 | âˆ’0.63 |
| ğŸ”¥ Risky | 6.04 | 18.95 | âˆ’12.91 |
| ğŸ’€ Extreme | 2.84 | 26.63 | âˆ’23.79 |
| â˜  Abyss | 0.83 | 41.17 | âˆ’40.34 |

---

## 5. å…¬å¹³æ€§åˆ†æ

### 5.1 Normal éš¾åº¦çš„éå¯¹ç§°æ€§åŸå› 

Normal éš¾åº¦å‚æ•°å®Œå…¨å¯¹ç§°ï¼ˆåŒæ–¹ 30HPã€æ— åŠ æˆï¼‰ï¼Œä½†å®æµ‹èƒœç‡ä»… **45.16%**ã€‚è¿™ä¸æ˜¯ bugï¼ŒåŸå› åˆ†æå¦‚ä¸‹ï¼š

1. **å‘ç‰Œæœºåˆ¶ä¸å¯¹ç§°**: `playerCards[i] = shuffled[i*2]`, `enemyCards[i] = shuffled[i*2+1]`ã€‚ç©å®¶å§‹ç»ˆæ‹¿å¶æ•°ä½ï¼Œæ•Œæ–¹æ‹¿å¥‡æ•°ä½ã€‚åœ¨ç¡®å®šæ€§æ´—ç‰Œåºåˆ—ä¸­ï¼Œè¿™ç§å›ºå®šä½ç½®åˆ†é…äº§ç”Ÿäº†å¾®å°çš„ç»Ÿè®¡åç§»ã€‚

2. **èƒœè´Ÿåˆ¤å®šè§„åˆ™**: å½“åŒæ–¹ HP > 0 æ—¶ä»¥ `playerHp > enemyHp` åˆ¤èƒœã€‚HP ç›¸ç­‰ç®—å¹³å±€ï¼ˆ5.78%ï¼‰ï¼Œä¸ç®—ç©å®¶èµ¢ã€‚è‹¥å°†å¹³å±€çš„ä¸€åŠå½’å…¥èƒœæ–¹ï¼Œ"ä¿®æ­£èƒœç‡" çº¦ä¸º 48.05%ï¼Œæ›´æ¥è¿‘ 50%ã€‚

3. **æˆ˜æ–—å¼•æ“çš„ç¡®å®šæ€§**: åŒä¸€å¼ ç‰Œåœ¨ä¸åŒä½ç½®ï¼ˆç©å®¶æ‰‹ vs æ•Œæ‰‹ï¼‰çš„æ•ˆæœå¹¶ä¸å®Œå…¨ç­‰ä»·ã€‚ä¾‹å¦‚ Major Arcana çš„ `applyMajorEffect` ä¸­ Justice (majorIndex=11) å’Œ Judgement (majorIndex=20) çš„ conditional æ•ˆæœå–å†³äºå½“å‰ HP å·®è·ï¼Œè¿™ä½¿å¾—å…ˆæ‰‹/åæ‰‹ï¼ˆè™½ç„¶å®é™…åŒæ—¶ç»“ç®—ï¼‰äº§ç”Ÿäº†éšå«çš„è·¯å¾„ä¾èµ–ã€‚

### 5.2 å¯éªŒè¯æ€§

æ¸¸æˆå¼•æ“æ˜¯ **Provably Fair** (å¯è¯æ˜å…¬å¹³) çš„ï¼š
- ç§å­ + éš¾åº¦ â†’ å®Œå…¨ç¡®å®šçš„ç»“æœ
- ä»»ä½•äººéƒ½å¯ä»¥ç”¨ç›¸åŒç§å­ + éš¾åº¦é‡æ”¾å¾—åˆ°å®Œå…¨ä¸€è‡´çš„ç»“æœ
- ç®—æ³•å¼€æºå¯å®¡è®¡

---

## 6. åº„å®¶è¿è¥å»ºè®®

### 6.1 å½“å‰é…ç½®è¯„ä¼°

| éš¾åº¦ | åº„å®¶ä¼˜åŠ¿ | è¯„ä¼° |
|------|---------|------|
| ğŸŒ™ Safe | 0.68% | âœ… ä¼˜ç§€ â€” æ¥è¿‘å…¬å¹³ï¼Œå¸å¼•ç©å®¶ |
| âš” Normal | 3.90% | âœ… åˆç† â€” æ ‡å‡†èµŒåœºæ°´å‡† |
| ğŸ”¥ Risky | 43.86% | âš ï¸ åé«˜ â€” å¯èƒ½åŠé€€ç©å®¶ |
| ğŸ’€ Extreme | 62.01% | âš ï¸ å¾ˆé«˜ â€” ä»…é€‚åˆé«˜é£é™©åå¥½è€… |
| â˜  Abyss | 74.97% | âš ï¸ æé«˜ â€” "å½©ç¥¨çº§"èµ”ç‡ |

### 6.2 è°ƒä¼˜å»ºè®®

è‹¥å¸Œæœ› Risky/Extreme/Abyss æ›´æ¥è¿‘åˆç†èŒƒå›´ï¼ˆåº„å®¶ä¼˜åŠ¿ 5-15%ï¼‰ï¼Œéœ€è¦æé«˜å¯¹åº”å€ç‡ï¼š

**ä½¿åº„å®¶ä¼˜åŠ¿ = 10% æ‰€éœ€çš„ç†è®ºæœ€ä½å€ç‡ï¼š**

$$
M_{\text{fair}} = \frac{1 - \text{HE}_{\text{target}} - P(\text{draw}) \times M_{\text{draw}}}{P(\text{win})}
$$

| éš¾åº¦ | å½“å‰å€ç‡ | å®é™…èƒœç‡ | ä½¿ HE=10% æ‰€éœ€å€ç‡ | ä½¿ HE=5% æ‰€éœ€å€ç‡ |
|------|---------|---------|-------------------|-------------------|
| ğŸ”¥ Risky (16.64% win, 4.14% draw) | Ã—3.0 | 16.64% | Ã—5.03 | Ã—5.33 |
| ğŸ’€ Extreme (6.81% win, 1.97% draw) | Ã—5.0 | 6.81% | Ã—12.63 | Ã—13.36 |
| â˜  Abyss (2.37% win, 0.46% draw) | Ã—10.0 | 2.37% | Ã—37.36 | Ã—39.47 |

### 6.3 æ¨èçš„å¹³è¡¡æ–¹æ¡ˆ

è‹¥ä¸æ”¹å˜å€ç‡ï¼Œå¯é€šè¿‡è°ƒæ•´æˆ˜æ–—å‚æ•°é™ä½éš¾åº¦åç§»ï¼š

**æ–¹æ¡ˆ A â€” é™ä½æ•Œæ–¹åŠ æˆ**ï¼ˆä¿æŒå½“å‰å€ç‡ä¸å˜ï¼‰:

| éš¾åº¦ | å»ºè®®è°ƒæ•´ | é¢„æœŸæ•ˆæœ |
|------|---------|---------|
| ğŸ”¥ Risky | enemyDmgBonus: 2â†’1, enemyHealBonus: 1â†’0 | èƒœç‡â†‘ â†’ HEâ†“è‡³çº¦ 15-20% |
| ğŸ’€ Extreme | enemyDmgBonus: 3â†’1, enemyHealBonus: 2â†’0, enemyStartHp: 40â†’35 | èƒœç‡â†‘ â†’ HEâ†“è‡³çº¦ 20-30% |
| â˜  Abyss | enemyDmgBonus: 5â†’2, enemyHealBonus: 3â†’1, playerStartHp: 20â†’25 | èƒœç‡â†‘ â†’ HEâ†“è‡³çº¦ 30-40% |

> **æ³¨æ„**: ä»¥ä¸Šé¢„æœŸæ•ˆæœä¸ºæ–¹å‘æ€§ä¼°è®¡ã€‚ä»»ä½•å‚æ•°è°ƒæ•´ååº”é‡æ–°è¿è¡Œæ¨¡æ‹Ÿä»¥è·å–ç²¾ç¡®æ•°æ®ã€‚

---

## 7. æ•°æ®ç½®ä¿¡åº¦å£°æ˜

| æŒ‡æ ‡ | å€¼ |
|------|---|
| æ¨¡æ‹Ÿæ–¹æ³• | Monte Carlo â€” å®é™…å¼•æ“å…¨è·¯å¾„è§£ç®— |
| æ¯éš¾åº¦æ ·æœ¬é‡ | 200,000 |
| æ€»æ ·æœ¬é‡ | 1,000,000 |
| PRNG | mulberry32ï¼ˆç¡®å®šæ€§ï¼Œå¯å¤ç°ï¼‰ |
| ç½®ä¿¡åŒºé—´ | 95%ï¼ˆWilson Score / Delta Methodï¼‰ |
| æœ€å¤§ CI åŠå®½ï¼ˆèƒœç‡ï¼‰ | < 0.25 ä¸ªç™¾åˆ†ç‚¹ |
| æ¨¡æ‹Ÿè€—æ—¶ | ~2.2 ç§’ï¼ˆå…¨éƒ¨ 5 ä¸ªéš¾åº¦ï¼‰ |
| é™æ€è¿‘ä¼¼ / ä¸»è§‚é¢„ä¼° | **æ—  â€” å…¨éƒ¨ä¸ºå®æµ‹æ•°æ®** |

---

## é™„å½• Aï¼šåŸå§‹ JSON æ•°æ®

<details>
<summary>ç‚¹å‡»å±•å¼€å®Œæ•´ JSON</summary>

```json
[
  {
    "difficulty": "safe",
    "multiplier": 1.5,
    "drawMultiplier": 1,
    "playerStartHp": 30,
    "enemyStartHp": 25,
    "enemyDmgBonus": 0,
    "enemyHealBonus": 0,
    "playerDmgBonus": 1,
    "samples": 200000,
    "winRate": 61.904,
    "drawRate": 6.461,
    "lossRate": 31.635,
    "winRateCI95": [61.691, 62.117],
    "houseEdge": 0.683,
    "houseEdgeCI95": [0.346, 1.02],
    "ev": -0.00683,
    "avgPlayerFinalHp": 11.33,
    "avgEnemyFinalHp": 5.93,
    "avgRounds": 4.37,
    "earlyTermRate": 39.59,
    "playerKORate": 20.87,
    "enemyKORate": 42.8,
    "avgPlayerDmgPerRound": 5.48,
    "avgEnemyDmgPerRound": 4.77,
    "avgMajorsPerBattle": 2.46
  },
  {
    "difficulty": "normal",
    "multiplier": 2,
    "drawMultiplier": 1,
    "playerStartHp": 30,
    "enemyStartHp": 30,
    "enemyDmgBonus": 0,
    "enemyHealBonus": 0,
    "playerDmgBonus": 0,
    "samples": 200000,
    "winRate": 45.16,
    "drawRate": 5.777,
    "lossRate": 49.063,
    "winRateCI95": [44.941, 45.378],
    "houseEdge": 3.903,
    "houseEdgeCI95": [3.455, 4.352],
    "ev": -0.03903,
    "avgPlayerFinalHp": 11.16,
    "avgEnemyFinalHp": 11.79,
    "avgRounds": 4.69,
    "earlyTermRate": 21.52,
    "playerKORate": 21.54,
    "enemyKORate": 18.49,
    "avgPlayerDmgPerRound": 4.52,
    "avgEnemyDmgPerRound": 4.7,
    "avgMajorsPerBattle": 2.65
  },
  {
    "difficulty": "risky",
    "multiplier": 3,
    "drawMultiplier": 1.5,
    "playerStartHp": 30,
    "enemyStartHp": 35,
    "enemyDmgBonus": 2,
    "enemyHealBonus": 1,
    "playerDmgBonus": 0,
    "samples": 200000,
    "winRate": 16.642,
    "drawRate": 4.143,
    "lossRate": 79.216,
    "winRateCI95": [16.479, 16.806],
    "houseEdge": 43.86,
    "houseEdgeCI95": [43.353, 44.367],
    "ev": -0.4386,
    "avgPlayerFinalHp": 6.04,
    "avgEnemyFinalHp": 18.95,
    "avgRounds": 4.53,
    "earlyTermRate": 31.0,
    "playerKORate": 46.42,
    "enemyKORate": 5.82,
    "avgPlayerDmgPerRound": 4.61,
    "avgEnemyDmgPerRound": 6.63,
    "avgMajorsPerBattle": 2.56
  },
  {
    "difficulty": "extreme",
    "multiplier": 5,
    "drawMultiplier": 2,
    "playerStartHp": 25,
    "enemyStartHp": 40,
    "enemyDmgBonus": 3,
    "enemyHealBonus": 2,
    "playerDmgBonus": 0,
    "samples": 200000,
    "winRate": 6.811,
    "drawRate": 1.97,
    "lossRate": 91.219,
    "winRateCI95": [6.701, 6.922],
    "houseEdge": 62.008,
    "houseEdgeCI95": [61.442, 62.573],
    "ev": -0.62008,
    "avgPlayerFinalHp": 2.84,
    "avgEnemyFinalHp": 26.63,
    "avgRounds": 3.98,
    "earlyTermRate": 56.96,
    "playerKORate": 72.88,
    "enemyKORate": 2.33,
    "avgPlayerDmgPerRound": 4.72,
    "avgEnemyDmgPerRound": 7.69,
    "avgMajorsPerBattle": 2.25
  },
  {
    "difficulty": "abyss",
    "multiplier": 10,
    "drawMultiplier": 3,
    "playerStartHp": 20,
    "enemyStartHp": 50,
    "enemyDmgBonus": 5,
    "enemyHealBonus": 3,
    "playerDmgBonus": -1,
    "samples": 200000,
    "winRate": 2.365,
    "drawRate": 0.458,
    "lossRate": 97.177,
    "winRateCI95": [2.299, 2.433],
    "houseEdge": 74.975,
    "houseEdgeCI95": [74.303, 75.646],
    "ev": -0.74974,
    "avgPlayerFinalHp": 0.83,
    "avgEnemyFinalHp": 41.17,
    "avgRounds": 2.96,
    "earlyTermRate": 86.86,
    "playerKORate": 92.22,
    "enemyKORate": 1.11,
    "avgPlayerDmgPerRound": 4.08,
    "avgEnemyDmgPerRound": 9.78,
    "avgMajorsPerBattle": 1.66
  }
]
```

</details>

---

## é™„å½• Bï¼šå¤ç°æŒ‡å—

```bash
cd frontend
npx tsx simulation.ts
```

ä¿®æ”¹ `simulation.ts` ä¸­ `SAMPLES_PER_DIFFICULTY` å¯è°ƒæ•´æ ·æœ¬é‡ã€‚200,000 æ ·æœ¬çº¦éœ€ 2 ç§’ï¼Œ1,000,000 æ ·æœ¬çº¦éœ€ 10 ç§’ã€‚

---

## é™„å½• Cï¼šå…¬å¼æ±‡æ€»

**ç©å®¶æœŸæœ›å›æŠ¥ï¼ˆæ¯å•ä½ä¸‹æ³¨ï¼‰ï¼š**

$$
\text{Payout} = P_w \times M_w + P_d \times M_d + P_l \times 0
$$

**ç©å®¶æœŸæœ›å€¼ï¼š**

$$
\text{EV} = \text{Payout} - 1
$$

**åº„å®¶ä¼˜åŠ¿ï¼š**

$$
\text{HE} = -\text{EV} = 1 - P_w \times M_w - P_d \times M_d
$$

**å…¬å¹³å€ç‡ï¼ˆä½¿ HE = ç›®æ ‡å€¼ï¼‰ï¼š**

$$
M_{\text{win}} = \frac{1 - \text{HE}_{\text{target}} - P_d \times M_d}{P_w}
$$

**Wilson Score 95% ç½®ä¿¡åŒºé—´ï¼š**

$$
\frac{p + \frac{z^2}{2n} \pm z\sqrt{\frac{p(1-p)}{n} + \frac{z^2}{4n^2}}}{1 + \frac{z^2}{n}}
$$

å…¶ä¸­ $z = 1.96$ï¼Œ$n$ ä¸ºæ ·æœ¬é‡ï¼Œ$p$ ä¸ºè§‚æµ‹æ¯”ä¾‹ã€‚
